package CB;
import java.util.Scanner;
import java.util.HashSet;

public class cb {

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		
     String str="12345678901202012018VickeyMickey                       200001020111KamleshPatel                       200001020099      9999.90" + 
      		"";
     TransactionID(str);
     System.out.println("Hash Set: "+set);
	}
	
	
	static HashSet<String> set=new HashSet<String>();
	public static void TransactionID(String str)
	{
		String substr= str.substring(0,12);
		//initial 12 characters are considered
		if(!set.contains(substr))
			{//check further validations only then add to the set
			 if(!PName(str,20)) 
			 System.out.println("Payer's Name is errorsome!");
		     else if(!PName(str,67))
		     System.out.println("Payee's Name is errorsome!");
		     else if(!Account(str,55))
		     System.out.println("Payer's Account is Invalid!");
		     else if(!Account(str,102))
		     System.out.println("Payee's Account is Invalid!");
		     else if(!Amount(str,114))
			 System.out.println("Amount Invalid!");
		     else    
			 {set.add(substr);
			 System.out.println("\nValid Transaction");
			 return ;
			 }
			 System.out.println("\nInvalid Transaction");
		    }
		else System.out.println("\nInvalid Transaction");
		
	}//end
	
    public static boolean PName(String line,int q)
{   
	 String substr=line.substring(q,q+35);
int i=0;
	  while(i<35)
		  if(Character.isLetter(substr.charAt(i))||substr.charAt(i)==' ') 
			 ++i; 
		  else
                        {
                         System.out.print("\nInvalid");
                         return false;
                        }
				  
	 if(i==35)System.out.println("\nValid");
	 return true;
}//end

    public static boolean Account(String line,int q)
{   
	 String substr=line.substring(q,q+12);
if(isAlphanumeric2(substr))return true;
else return false;
}
         
public static boolean isAlphanumeric2(String str)
{
       for (int i=0; i<str.length(); i++) {
           char c = str.charAt(i);
           if (c < 0x30 || (c >= 0x3a && c <= 0x40) || (c > 0x5a && c <= 0x60) || c > 0x7a)
               return false;
       }
       return true;
}//end

   public static boolean Amount(String line, int q)
{
String substr=line.substring(q,q+13);
try {
//System.out.println("\nAmount valid : "+Float.parseFloat(substr));
	return true;
}catch(Exception e)
{
	//System.out.println(e+"\nAmount Invalid");	
	return false;
}
}//end

}
